<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tetsugaku no Michi – Pacchetto Giappone</title>
  <link rel="icon" type="image/png" href="favicon.ico" />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Raleway:wght@300;500;700&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/styles.css">
  <link rel="stylesheet" href="assets/styles_pacchetti.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
  .hero-banner {
    position: relative;
    overflow: hidden;
  }

  .hero-banner::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.5));
    z-index: 2;
  }

h1.hero-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(2.4rem, 5vw, 3.5rem);
    font-weight: 700;
    color: #C9A86A;
    margin-bottom: 20px;
    text-align: center;
  }

</style>

</head>

<body>
  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="navbar-left">
      <img src="assets/logo-yume.jpg" alt="Logo YUME" class="logo-navbar">
    </div>
    <button class="hamburger" onclick="toggleSidebar()">☰</button>
  </nav>

  <!-- SIDEBAR -->
  <div id="sidebar" class="sidebar hidden">
    <div class="sidebar-logo">
      <img src="assets/logo_bar.png" alt="Logo Yume" class="logo-sidebar">
    </div>
    <a href="index.html">Home</a>
    <a href="pacchetti.html">Pacchetti flessibili</a>
    <a href="consulenze.html">Consulenze</a>
    <a href="faq.html">FAQ</a>
    <a href="info-utili.html">Informazioni utili</a>
    <a href="contatti.html">Contatti</a>
    <a href="profilo.html">Registrazione</a>
    <a href="log-in.html">Area Personale</a>
  </div>

  <!-- COPERTINA GRANDE -->
  <header class="hero-banner">
    <picture>
      <source srcset="tetsugaku/tetsugaku_mob.jpg" media="(max-width: 768px)">
      <img src="tetsugaku/tetsugaku_desk.jpg" alt="Pacchetti Yume Travel" class="hero-banner-img">
    </picture>

    <div class="hero-overlay">
      <h1 class="hero-title">Tetsugaku no Michi</h1>
      <p class="hero-subtitle">Alla scoperta del Giappone spirituale e cerimoniale</p>
    </div>

    <div class="scroll-indicator" onclick="scrollToMain()">
      <span class="arrow-down"></span>
    </div>
  </header>

  <!-- CONTENUTO PRINCIPALE -->
  <div class="main-wrapper">
    <section class="hajimete-intro slide-in">
      <h1>Tetsugaku no Michi – Il sentiero del Filosofo</h1>
      <p class="lead">Alla scoperta del Giappone spirituale e cerimoniale.</p>
      <p class="intro-desc">Pensato per chi desidera immergersi in templi, rituali e paesaggi di grande valore simbolico e meditativo. Un itinerario tra i luoghi dell’anima e le arti del vivere consapevole.</p>
      <ul class="icon-list">
        <li><i class="fa fa-calendar"></i> Durata: da 8 a 18 notti</li>
        <li><i class="fa fa-map-marker"></i> Città visitabili: Kyoto, Nara, Kanazawa, Kurashiki, Okayama, Koyasan, Uji, Tokyo, Hakone, Kamakura</li>
        <li><i class="fa fa-leaf"></i> Ideale per: chi ama templi, rituali e tradizione</li>
      </ul>
      <p class="price-tag">A partire da 2.590€</p>
    </section>

    <section class="mappa-overview slide-in">
      <h2 class="section-title">Panoramica del viaggio</h2>
      <div id="map-overview" style="height: 450px; border-radius: 12px; overflow: hidden;"></div>
    </section>

    <div class="mappa-legend">
      <p><i class="fa fa-map" aria-hidden="true"></i> <strong>Come usare la mappa</strong></p>
      <ul>
        <li><i class="fa fa-location-arrow"></i> Clicca sui torii <img src="tetsugaku/marker-yume.png" alt="marker" class="mini-marker"> per scoprire le tappe del viaggio</li>
        <li><i class="fa fa-arrows-alt"></i> Trascina per esplorare liberamente la mappa</li>
        <li><i class="fa fa-search-plus"></i> Usa lo zoom per avvicinarti alle zone locali</li>
      </ul>
    </div>

    <section class="focus-tags slide-in">
      <div class="focus-item">
        <div class="focus-icon"><i class="fa fa-building"></i></div>
        <p class="focus-label">Cultura</p>
        <div class="focus-bar">
          <div class="bar-fill" style="width: 100%; background-color: #C9A86A;"></div>
        </div>
        <div class="score-text">100%</div>
      </div>

      <div class="focus-item">
        <div class="focus-icon"><i class="fa fa-leaf"></i></div>
        <p class="focus-label">Spiritualità</p>
        <div class="focus-bar">
          <div class="bar-fill" style="width: 90%; background-color: #C9A86A;"></div>
        </div>
        <div class="score-text">90%</div>
      </div>

      <div class="focus-item">
        <div class="focus-icon"><i class="fa fa-leaf"></i></div>
        <p class="focus-label">Natura</p>
        <div class="focus-bar">
          <div class="bar-fill" style="width: 80%; background-color: #C9A86A;"></div>
        </div>
        <div class="score-text">80%</div>
      </div>

      <div class="focus-item">
        <div class="focus-icon"><i class="fa fa-star"></i></div>
        <p class="focus-label">Esperienze</p>
        <div class="focus-bar">
          <div class="bar-fill" style="width: 80%; background-color: #C9A86A;"></div>
        </div>
        <div class="score-text">80%</div>
      </div>

      <div class="focus-item">
        <div class="focus-icon"><i class="fa fa-cutlery"></i></div>
        <p class="focus-label">Gastronomia</p>
        <div class="focus-bar">
          <div class="bar-fill" style="width: 70%; background-color: #C9A86A;"></div>
        </div>
        <div class="score-text">70%</div>
      </div>
    </section>

<!-- ITINERARIO -->
<section class="itinerario-esteso slide-in">
  <h2>Itinerario tipo – 12 notti</h2>

  <!-- Placeholder per tappe da inserire -->
<div class="giorno-box">
  <button class="giorno-toggle">Giorno 1 – Partenza dall’Italia</button>
  <div class="giorno-content">
    <p><strong>Mattina:</strong> Partenza con volo notturno per il Giappone.</p>
  </div>
</div>

<div class="giorno-box">
  <button class="giorno-toggle">Giorno 2 – Arrivo a Kyoto</button>
  <div class="giorno-content">
    <p><strong>Pomeriggio:</strong> Arrivo all’aeroporto Kansai e trasferimento in hotel a Kyoto.</p>
    <p><strong>Sera:</strong> Passeggiata lungo il fiume Kamo e cena in Pontocho.</p>
    <p><i class="fa fa-star"></i> Kamo River, Pontocho</p>
  </div>
</div>

<div class="giorno-box">
  <button class="giorno-toggle">Giorno 3 – Kyoto Est e Sentiero del Filosofo</button>
  <div class="giorno-content">
    <p><strong>Mattina:</strong> Visita a Ginkaku-ji e passeggiata lungo il Sentiero del Filosofo fino a Nanzen-ji.</p>
    <p><strong>Pomeriggio:</strong> Tempio Eikando e zona Higashiyama (pagoda Yasaka).</p>
    <p><strong>Sera:</strong> Cerimonia del tè con maestra del tè.</p>
    <p><i class="fa fa-star"></i> Ginkaku-ji, Nanzen-ji, Eikando, Yasaka-no-to</p>
  </div>
</div>

<div class="giorno-box">
  <button class="giorno-toggle">Giorno 4 – Escursione a Nara e Uji</button>
  <div class="giorno-content">
    <p><strong>Mattina:</strong> Trasferimento a Nara: Todai-ji, Parco dei cervi, Kasuga Taisha.</p>
    <p><strong>Pomeriggio:</strong> Visita al tempio Byodo-in a Uji e degustazione di tè matcha.</p>
    <p><strong>Sera:</strong> Rientro a Kyoto e cena tipica.</p>
    <p><i class="fa fa-star"></i> Todai-ji, Kasuga Taisha, Byodo-in</p>
  </div>
</div>

<div class="giorno-box">
  <button class="giorno-toggle">Giorno 5 – Kyoto Ovest e Arashiyama</button>
  <div class="giorno-content">
    <p><strong>Mattina:</strong> Visita a Ryoan-ji e al Padiglione d'Oro (Kinkaku-ji).</p>
    <p><strong>Pomeriggio:</strong> Quartiere Arashiyama: Tenryu-ji, foresta di bambù e ponte Togetsukyo.</p>
    <p><strong>Sera:</strong> Onsen serale o cena lungo il fiume.</p>
    <p><i class="fa fa-star"></i> Kinkaku-ji, Tenryu-ji, Foresta di bambù</p>
  </div>
</div>

<div class="giorno-box">
  <button class="giorno-toggle">Giorno 6 – Okayama e Himeji</button>
  <div class="giorno-content">
    <p><strong>Mattina:</strong> Partenza per Okayama: visita al Korakuen e al Castello Nero.</p>
    <p><strong>Pomeriggio:</strong> Spostamento a Himeji e visita al Castello (Patrimonio UNESCO) e giardini Koko-en.</p>
    <p><strong>Sera:</strong> Rientro a Kyoto e cena libera.</p>
    <p><i class="fa fa-star"></i> Korakuen, Castello di Himeji, Koko-en</p>
  </div>
</div>

<div class="giorno-box">
  <button class="giorno-toggle">Giorno 7 – Da Kyoto a Kanazawa</button>
  <div class="giorno-content">
    <p><strong>Mattina:</strong> Partenza per Kanazawa con treno express.</p>
    <p><strong>Pomeriggio:</strong> Visita al Giardino Kenroku-en, Castello di Kanazawa, quartiere dei samurai.</p>
    <p><strong>Sera:</strong> Cena kaiseki nel quartiere di Higashi Chaya.</p>
    <p><i class="fa fa-star"></i> Kenroku-en, Castello, Nagamachi</p>
  </div>
</div>

<div class="giorno-box">
  <button class="giorno-toggle">Giorno 8 – Escursione a Shirakawa-go</button>
  <div class="giorno-content">
    <p><strong>Mattina:</strong> Gita in bus a Shirakawa-go, villaggio storico UNESCO.</p>
    <p><strong>Pomeriggio:</strong> Visita alla casa Wada-ke e al museo folcloristico.</p>
    <p><strong>Sera:</strong> Rientro a Kanazawa e passeggiata notturna a Higashi Chaya.</p>
    <p><i class="fa fa-star"></i> Shirakawa-go, Wada-ke, Museo folclore</p>
  </div>
</div>

<div class="giorno-box">
  <button class="giorno-toggle">Giorno 9 – Kanazawa culturale</button>
  <div class="giorno-content">
    <p><strong>Mattina:</strong> Museo D.T. Suzuki e Museo di Arte Contemporanea del 21° secolo.</p>
    <p><strong>Pomeriggio:</strong> Visita al mercato Omicho e alle vie storiche.</p>
    <p><strong>Sera:</strong> Cena in izakaya raffinato.</p>
    <p><i class="fa fa-star"></i> Museo D.T. Suzuki, Omicho, 21st Century Museum</p>
  </div>
</div>

<div class="giorno-box">
  <button class="giorno-toggle">Giorno 10 – Da Kanazawa a Tokyo</button>
  <div class="giorno-content">
    <p><strong>Mattina:</strong> Shinkansen da Kanazawa a Tokyo.</p>
    <p><strong>Pomeriggio:</strong> Sistemazione in hotel ad Asakusa e visita a Senso-ji.</p>
    <p><strong>Sera:</strong> Vista panoramica dalla Tokyo Skytree e passeggiata lungo il Sumida.</p>
    <p><i class="fa fa-star"></i> Senso-ji, Tokyo Skytree, Sumida River</p>
  </div>
</div>

<div class="giorno-box">
  <button class="giorno-toggle">Giorno 11 – Escursione a Kamakura</button>
  <div class="giorno-content">
    <p><strong>Mattina:</strong> Visita al Grande Buddha, Hase-dera e passeggiata nel centro storico.</p>
    <p><strong>Pomeriggio:</strong> Santuario Tsurugaoka e tramonto sulla costa di Enoshima.</p>
    <p><strong>Sera:</strong> Rientro a Tokyo e cena libera.</p>
    <p><i class="fa fa-star"></i> Daibutsu, Hase-dera, Tsurugaoka, Enoshima</p>
  </div>
</div>

<div class="giorno-box">
  <button class="giorno-toggle">Giorno 12 – Escursione a Hakone</button>
  <div class="giorno-content">
    <p><strong>Mattina:</strong> Museo all’aperto e funivia sul Lago Ashi.</p>
    <p><strong>Pomeriggio:</strong> Crociera panoramica e sosta in onsen.</p>
    <p><strong>Sera:</strong> Rientro a Tokyo e passeggiata notturna a Ueno o Shinjuku.</p>
    <p><i class="fa fa-star"></i> Hakone Open-Air Museum, Lago Ashi, Onsen</p>
  </div>
</div>

<div class="giorno-box">
  <button class="giorno-toggle">Giorno 13 – Rientro</button>
  <div class="giorno-content">
    <p>Trasferimento all’aeroporto e volo di rientro per l’Italia.</p>
  </div>
</div>

</section>

<section class="mappa-itinerario slide-in">
  <h2 class="section-title">Itinerario tipo – su mappa</h2>
  <div id="map-itinerario" style="height: 500px; border-radius: 12px; overflow: hidden;"></div>
</section>

<div class="mappa-legend">
  <p><i class="fa fa-map" aria-hidden="true"></i> <strong>Come usare la mappa</strong></p>
  <ul>
    <li><i class="fa fa-location-arrow"></i> Clicca sui torii <img src="tetsugaku/marker-yume.png" alt="marker" class="mini-marker"> per scoprire le tappe del viaggio</li>
    <li><i class="fa fa-arrows-alt"></i> Trascina per esplorare liberamente la mappa</li>
    <li><i class="fa fa-search-plus"></i> Usa lo zoom per avvicinarti alle zone locali</li>
  </ul>
</div>

<section class="foto-slider-section slide-in">
  <h2 class="foto-slider-title">I luoghi del viaggio Tetsugaku</h2>
  <div class="foto-slider-wrapper">
    <button class="slider-arrow left" onclick="scrollFotoSlider(-1)"></button>
    <div class="foto-slider-container" id="fotoSlider">
      <div class="foto-box"><img src="tetsugaku/1.jpg" alt="Foto 1" loading="lazy" onclick="apriFotoFullscreen(0)"></div>
      <div class="foto-box"><img src="tetsugaku/2.jpg" alt="Foto 2" loading="lazy" onclick="apriFotoFullscreen(1)"></div>
      <div class="foto-box"><img src="tetsugaku/3.jpg" alt="Foto 3" loading="lazy" onclick="apriFotoFullscreen(2)"></div>
      <div class="foto-box"><img src="tetsugaku/4.jpg" alt="Foto 4" loading="lazy" onclick="apriFotoFullscreen(3)"></div>
      <div class="foto-box"><img src="tetsugaku/5.jpg" alt="Foto 5" loading="lazy" onclick="apriFotoFullscreen(4)"></div>
      <div class="foto-box"><img src="tetsugaku/6.jpg" alt="Foto 6" loading="lazy" onclick="apriFotoFullscreen(5)"></div>
      <div class="foto-box"><img src="tetsugaku/7.jpg" alt="Foto 7" loading="lazy" onclick="apriFotoFullscreen(6)"></div>
      <div class="foto-box"><img src="tetsugaku/8.jpg" alt="Foto 8" loading="lazy" onclick="apriFotoFullscreen(7)"></div>
      <div class="foto-box"><img src="tetsugaku/9.jpg" alt="Foto 9" loading="lazy" onclick="apriFotoFullscreen(8)"></div>
    </div>
    <button class="slider-arrow right" onclick="scrollFotoSlider(1)"></button>
  </div>
</section>

<!-- ACCORDION -->
<section class="accordion-section slide-in">
<div class="info-boxes-container">
  <div class="info-box">
    <button class="info-toggle"><span class="info-number">1.</span> Cosa include il pacchetto <i class="fa fa-chevron-down toggle-icon"></i></button>
    <div class="info-content">
      <ul>
        <li>Alloggi centrali in categoria standard o superiore</li>
        <li>Voli andata/ritorno da principali aeroporti italiani</li>
        <li>Assicurazione medica, bagaglio e annullamento</li>
        <li>Guide digitali generali e tematiche in PDF</li>
        <li>Accesso gratuito al nostro travel assistant di viaggio</li>
      </ul>
    </div>
  </div>

  <div class="info-box">
    <button class="info-toggle"><span class="info-number">2.</span> Cosa non è incluso <i class="fa fa-chevron-down toggle-icon"></i></button>
    <div class="info-content">
      <ul>
        <li>Pasti e bevande</li>
        <li>Attività, ingressi o escursioni non specificati</li>
        <li>Servizi non espressamente indicati come inclusi</li>
      </ul>
    </div>
  </div>

  <div class="info-box">
    <button class="info-toggle"><span class="info-number">3.</span> Extra su richiesta <i class="fa fa-chevron-down toggle-icon"></i></button>
    <div class="info-content">
      <ul>
        <li>Esperienza in ryokan tradizionale con cena kaiseki</li>
        <li>Onsen privati o naturali</li>
        <li>Guide locali per Tokyo o Kyoto</li>
        <li>Biglietti Ghibli Park o Shinkansen extra</li>
      </ul>
    </div>
  </div>

  <div class="info-box">
    <button class="info-toggle"><span class="info-number">4.</span> Note importanti <i class="fa fa-chevron-down toggle-icon"></i></button>
    <div class="info-content">
      <p>I prezzi indicati si riferiscono al soggiorno minimo in bassa stagione.</p>
      <p>Consigliamo di prenotare almeno 3–4 mesi prima per assicurarsi disponibilità, offerte e personalizzazione.</p>
    </div>
  </div>
</div>
</section>

<section class="call-to-action slide-in">
<a href="pacchetti.html?pacchetto=tetsugaku#formPacchetto" class="modern-btn">Richiedi questo pacchetto</a>
</section>

<section class="viator-widget-section">
  <h2 class="section-title visible">Respira il viaggio - Tetsugaku</h2>
  <div data-vi-partner-id=U00663494 data-vi-widget-ref=W-11b4e145-4328-464b-ad53-0577aa447eb1 ></div>
</section>

<section class="call-to-action slide-in">
<a href="pacchetti.html?pacchetto=tetsugaku#formPacchetto" class="modern-btn">Richiedi questo pacchetto</a>
</section>

<!-- FOOTER -->
<footer class="main-footer">
  <div class="footer-social">
    <p><strong>Seguici su:</strong></p>
    <a href="https://www.instagram.com/yumeviaggi" target="_blank" aria-label="Instagram" class="fa fa-instagram"></a>
    <a href="https://yuta-travel.com" target="_blank" aria-label="Sito YUTA" class="fa fa-globe"></a>
  </div>
  <p class="footer-copy">© 2025 Yume Travel Tech – Tutti i diritti riservati.</p>
</footer>

<!-- Avatar Chatbot Yuki -->
<div id="yuki-chat-avatar" onclick="toggleYukiChat()" title="Hai bisogno di aiuto?">
  <img src="assets/yuki-avatar.png" alt="Yuki" />
</div>

<!-- Finestra Chat -->
<div id="yuki-chatbox" class="hidden">
  <div class="chatbox-header">
    <span>Yuki, assistente AI</span>
    <button onclick="toggleYukiChat()">✕</button>
  </div>
  <div class="chatbox-messages" id="chatbox-messages"></div>
  <div class="chatbox-input">
    <input type="text" id="userMessage" placeholder="Scrivi qui..." />
    <button onclick="sendMessage()">Invia</button>
  </div>
</div>

<script async src="https://www.viator.com/orion/partner/widget.js"></script>

<script>
  // Dopo il caricamento del widget Viator
  window.addEventListener("load", () => {
    const viatorDiv = document.querySelector("[data-vi-widget-ref]");
    if (viatorDiv) {
      setTimeout(() => {
        viatorDiv.style.display = "none";
        void viatorDiv.offsetHeight;
        viatorDiv.style.display = "";
      }, 800);
    }
  });
</script>

<script>
  window.addEventListener("DOMContentLoaded", function () {
    const el = document.querySelector('#yuki-chat-avatar');
    if (!el) return;
    el.style.position = 'fixed';
    el.style.bottom = '25px';
    el.style.right = '25px';
    el.style.width = '90px';
    el.style.height = '90px';
    el.style.zIndex = '9999';
    el.style.borderRadius = '50%';
    el.style.overflow = 'hidden';
    el.style.boxShadow = '0 4px 10px rgba(0,0,0,0.2)';
    el.style.backgroundColor = '#fff';
    const img = el.querySelector('img');
    if (img) {
      img.style.width = '100%';
      img.style.height = '100%';
      img.style.objectFit = 'cover';
      img.style.borderRadius = '50%';
    }
  });
</script>

<script src="assets/script.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const profilo = JSON.parse(sessionStorage.getItem("profiloUtente"));
    if (profilo) {
      document.querySelectorAll("a[href='log-in.html']").forEach(link => {
        link.href = "area-clienti.html";
      });
      const sidebar = document.querySelector(".sidebar");
      if (sidebar && !document.getElementById("userBox")) {
        const userBox = document.createElement("div");
        userBox.id = "userBox";
        userBox.style.marginTop = "30px";
        userBox.style.padding = "10px";
        userBox.style.textAlign = "center";
        userBox.style.borderTop = "1px solid #ccc";
        const avatar = document.createElement("img");
        avatar.src = localStorage.getItem("userAvatar") || "https://api.dicebear.com/7.x/avataaars/svg?seed=yume";
        avatar.alt = "Avatar";
        avatar.style.width = "60px";
        avatar.style.height = "60px";
        avatar.style.borderRadius = "50%";
        avatar.style.objectFit = "cover";
        avatar.style.border = "2px solid #C9A86A";
        avatar.style.marginBottom = "8px";
        const logoutBtn = document.createElement("button");
        logoutBtn.textContent = "Logout";
        logoutBtn.style.marginTop = "6px";
        logoutBtn.style.background = "#8B2C2B";
        logoutBtn.style.color = "#fff";
        logoutBtn.style.border = "none";
        logoutBtn.style.padding = "6px 12px";
        logoutBtn.style.borderRadius = "20px";
        logoutBtn.style.cursor = "pointer";
        logoutBtn.onclick = () => {
          sessionStorage.removeItem("profiloUtente");
          localStorage.removeItem("userAvatar");
          window.location.href = "index.html";
        };
        userBox.appendChild(avatar);
        userBox.appendChild(logoutBtn);
        sidebar.appendChild(userBox);
      }
    }
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const barObserver = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const bars = entry.target.querySelectorAll(".bar-fill");
          bars.forEach(bar => {
            const width = bar.getAttribute("data-fill");
            if (width) bar.style.width = width;
          });
          barObserver.unobserve(entry.target);
        }
      });
    }, { threshold: 0.3 });

    document.querySelectorAll(".focus-item").forEach(item => {
      const bar = item.querySelector(".bar-fill");
      if (bar) {
        const widthMatch = bar.getAttribute("style")?.match(/width:\s*(\d+%)/);
        if (widthMatch) {
          bar.setAttribute("data-fill", widthMatch[1]);
          bar.style.width = "0";
        }
        barObserver.observe(item);
      }
    });
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll('.giorno-toggle').forEach(btn => {
      btn.addEventListener('click', () => {
        btn.parentElement.classList.toggle('active');
      });
    });
  });
</script>

<script>
  function scrollFotoSlider(direction) {
    const container = document.getElementById("fotoSlider");
    const scrollAmount = 280;
    if (container) {
      container.scrollBy({
        left: direction * scrollAmount,
        behavior: 'smooth'
      });
    }
  }
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const dynamicObserver = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          dynamicObserver.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1 });

    document.querySelectorAll('.foto-box img, .foto-slider-title').forEach(el => {
      dynamicObserver.observe(el);
    });
  });
</script>

<script>
  const immagini = [
    "tetsugaku/1.jpg",
    "tetsugaku/2.jpg",
    "tetsugaku/3.jpg",
    "tetsugaku/4.jpg",
    "tetsugaku/5.jpg",
    "tetsugaku/6.jpg",
    "tetsugaku/7.jpg",
    "tetsugaku/8.jpg",
    "tetsugaku/9.jpg"
  ];

  let indexAttuale = 0;
  let startX = 0;

  function apriFotoFullscreen(index) {
    indexAttuale = index;
    const overlay = document.createElement('div');
    overlay.classList.add('fullscreen-overlay');
    const img = document.createElement('img');
    img.src = immagini[index];
    img.alt = "Foto " + (index + 1);
    img.classList.add("fullscreen-img");
    const btnChiudi = document.createElement('span');
    btnChiudi.innerHTML = "&times;";
    btnChiudi.classList.add("btn-close");
    btnChiudi.onclick = () => document.body.removeChild(overlay);
    const frecciaSx = document.createElement('button');
    frecciaSx.classList.add('fullscreen-arrow', 'left');
    frecciaSx.innerHTML = '<i class="fa fa-chevron-left"></i>';
    frecciaSx.onclick = (e) => { e.stopPropagation(); cambiaFoto(-1); };
    const frecciaDx = document.createElement('button');
    frecciaDx.classList.add('fullscreen-arrow', 'right');
    frecciaDx.innerHTML = '<i class="fa fa-chevron-right"></i>';
    frecciaDx.onclick = (e) => { e.stopPropagation(); cambiaFoto(1); };
    overlay.addEventListener('touchstart', (e) => { startX = e.touches[0].clientX; });
    overlay.addEventListener('touchend', (e) => {
      const endX = e.changedTouches[0].clientX;
      const diff = startX - endX;
      if (Math.abs(diff) > 50) {
        if (diff > 0) cambiaFoto(1);
        else cambiaFoto(-1);
      }
    });
    overlay.appendChild(btnChiudi);
    overlay.appendChild(frecciaSx);
    overlay.appendChild(img);
    overlay.appendChild(frecciaDx);
    document.body.appendChild(overlay);
  }

  function cambiaFoto(direz) {
    indexAttuale = (indexAttuale + direz + immagini.length) % immagini.length;
    const img = document.querySelector(".fullscreen-img");
    img.src = immagini[indexAttuale];
    img.alt = "Foto " + (indexAttuale + 1);
  }
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const customMarker = L.icon({
      iconUrl: 'tetsugaku/marker-yume.png',
      iconSize: [32, 42],
      iconAnchor: [16, 42],
      popupAnchor: [0, -36]
    });

    const map1 = L.map('map-overview').setView([35.0, 135.7], 6);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '© OpenStreetMap contributors'
    }).addTo(map1);

    const tappe = [
      { nome: "Kyoto", lat: 35.0116, lon: 135.7681 },
      { nome: "Nara", lat: 34.6851, lon: 135.8048 },
      { nome: "Kanazawa", lat: 36.5613, lon: 136.6562 },
      { nome: "Kurashiki", lat: 34.5850, lon: 133.7719 },
      { nome: "Okayama", lat: 34.6551, lon: 133.9195 },
      { nome: "Koyasan", lat: 34.2120, lon: 135.5851 },
      { nome: "Uji", lat: 34.8894, lon: 135.7996 },
      { nome: "Tokyo", lat: 35.682839, lon: 139.759455 },
      { nome: "Hakone", lat: 35.2328, lon: 139.1065 },
      { nome: "Kamakura", lat: 35.3191, lon: 139.5466 }
    ];

    tappe.forEach(t => {
      L.marker([t.lat, t.lon], { icon: customMarker })
        .addTo(map1)
        .bindPopup(`<strong>${t.nome}</strong>`);
    });

    L.polyline(tappe.map(t => [t.lat, t.lon]), {
      color: '#C9A86A',
      weight: 4,
      opacity: 0.8
    }).addTo(map1);

    const map2 = L.map('map-itinerario').setView([35.0, 135.7], 6);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '© OpenStreetMap contributors'
    }).addTo(map2);

const tappe12notti = [
  ["Kyoto", 35.0116, 135.7681],
  ["Nara", 34.6851, 135.8048],
  ["Uji", 34.8894, 135.7996],
  ["Okayama", 34.6551, 133.9195],
  ["Himeji", 34.8394, 134.6939],
  ["Kanazawa", 36.5613, 136.6562],
  ["Shirakawa-go", 36.2609, 136.8964],
  ["Tokyo", 35.682839, 139.759455],
  ["Kamakura", 35.3191, 139.5466],
  ["Hakone", 35.2328, 139.1065]
];

    tappe12notti.forEach(([nome, lat, lon]) => {
      L.marker([lat, lon], { icon: customMarker })
        .addTo(map2)
        .bindPopup(`<strong>${nome}</strong>`);
    });

    L.polyline(tappe12notti.map(t => [t[1], t[2]]), {
      color: '#8B2C2B',
      weight: 4,
      opacity: 0.8
    }).addTo(map2);
  });
</script>

</body>
</html>
